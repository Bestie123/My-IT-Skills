<!DOCTYPE html>
<html>
<head>
    <style>
        table { border-collapse: collapse; margin: 20px 0; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #f2f2f2; }
        .code { background-color: #f4f4f4; padding: 10px; font-family: monospace; }
        .note { background-color: #e7f3ff; padding: 15px; border-left: 4px solid #2196F3; }
        .warning { background-color: #fff3e0; padding: 15px; border-left: 4px solid #ff9800; }
    </style>
</head>
<body>

<h1>Явные операции соединения в SQL</h1>

<div class="note">
    <strong>Примечание:</strong> Явные соединения используют ключевые слова JOIN для объединения таблиц, в отличие от неявных соединений в WHERE.
</div>

<h2>Содержание</h2>
<ul>
    <li><a href="#inner-join">INNER JOIN</a></li>
    <li><a href="#left-join">LEFT JOIN</a></li>
    <li><a href="#right-join">RIGHT JOIN</a></li>
    <li><a href="#full-join">FULL JOIN</a></li>
    <li><a href="#cross-join">CROSS JOIN</a></li>
    <li><a href="#self-join">SELF JOIN</a></li>
    <li><a href="#multiple-joins">Множественные соединения</a></li>
    <li><a href="#comparison">Сравнение типов JOIN</a></li>
</ul>

<h2 id="inner-join">INNER JOIN</h2>

<table>
    <tr>
        <th>Описание</th>
        <td>Возвращает только те строки, для которых есть совпадения в обеих таблицах</td>
    </tr>
    <tr>
        <th>Синтаксис</th>
        <td class="code">SELECT columns FROM table1 INNER JOIN table2 ON table1.column = table2.column;</td>
    </tr>
    <tr>
        <th>Пример</th>
        <td class="code">
            SELECT employees.name, departments.department_name<br>
            FROM employees<br>
            INNER JOIN departments ON employees.department_id = departments.id;
        </td>
    </tr>
    <tr>
        <th>Визуализация</th>
        <td>Пересечение двух множеств</td>
    </tr>
</table>

<h2 id="left-join">LEFT JOIN (LEFT OUTER JOIN)</h2>

<table>
    <tr>
        <th>Описание</th>
        <td>Возвращает все строки из левой таблицы и соответствующие строки из правой таблицы. Если соответствий нет, возвращает NULL для правой таблицы</td>
    </tr>
    <tr>
        <th>Синтаксис</th>
        <td class="code">SELECT columns FROM table1 LEFT JOIN table2 ON table1.column = table2.column;</td>
    </tr>
    <tr>
        <th>Пример</th>
        <td class="code">
            SELECT customers.name, orders.order_date<br>
            FROM customers<br>
            LEFT JOIN orders ON customers.id = orders.customer_id;
        </td>
    </tr>
    <tr>
        <th>Визуализация</th>
        <td>Все левое множество + пересечение с правым</td>
    </tr>
</table>

<h2 id="right-join">RIGHT JOIN (RIGHT OUTER JOIN)</h2>

<table>
    <tr>
        <th>Описание</th>
        <td>Возвращает все строки из правой таблицы и соответствующие строки из левой таблицы. Если соответствий нет, возвращает NULL для левой таблицы</td>
    </tr>
    <tr>
        <th>Синтаксис</th>
        <td class="code">SELECT columns FROM table1 RIGHT JOIN table2 ON table1.column = table2.column;</td>
    </tr>
    <tr>
        <th>Пример</th>
        <td class="code">
            SELECT employees.name, departments.department_name<br>
            FROM employees<br>
            RIGHT JOIN departments ON employees.department_id = departments.id;
        </td>
    </tr>
    <tr>
        <th>Визуализация</th>
        <td>Все правое множество + пересечение с левым</td>
    </tr>
</table>

<div class="warning">
    <strong>Внимание:</strong> RIGHT JOIN менее популярен, так как обычно можно переписать запрос с LEFT JOIN, поменяв таблицы местами для лучшей читаемости.
</div>

<h2 id="full-join">FULL JOIN (FULL OUTER JOIN)</h2>

<table>
    <tr>
        <th>Описание</th>
        <td>Возвращает все строки из обеих таблиц. Если нет соответствий, возвращает NULL для недостающих данных</td>
    </tr>
    <tr>
        <th>Синтаксис</th>
        <td class="code">SELECT columns FROM table1 FULL JOIN table2 ON table1.column = table2.column;</td>
    </tr>
    <tr>
        <th>Пример</th>
        <td class="code">
            SELECT employees.name, departments.department_name<br>
            FROM employees<br>
            FULL JOIN departments ON employees.department_id = departments.id;
        </td>
    </tr>
    <tr>
        <th>Визуализация</th>
        <td>Объединение двух множеств</td>
    </tr>
</table>

<div class="note">
    <strong>Примечание:</strong> FULL JOIN не поддерживается в MySQL. Вместо этого можно использовать комбинацию LEFT JOIN и RIGHT JOIN с UNION.
</div>

<h2 id="cross-join">CROSS JOIN</h2>

<table>
    <tr>
        <th>Описание</th>
        <td>Возвращает декартово произведение двух таблиц (все возможные комбинации строк)</td>
    </tr>
    <tr>
        <th>Синтаксис</th>
        <td class="code">
            SELECT columns FROM table1 CROSS JOIN table2;<br>
            -- или<br>
            SELECT columns FROM table1, table2;
        </td>
    </tr>
    <tr>
        <th>Пример</th>
        <td class="code">
            SELECT colors.color_name, sizes.size_name<br>
            FROM colors<br>
            CROSS JOIN sizes;
        </td>
    </tr>
    <tr>
        <th>Визуализация</th>
        <td>Все элементы из A × все элементы из B</td>
    </tr>
</table>

<h2 id="self-join">SELF JOIN</h2>

<table>
    <tr>
        <th>Описание</th>
        <td>Соединение таблицы с самой собой. Полезно для иерархических данных</td>
    </tr>
    <tr>
        <th>Синтаксис</th>
        <td class="code">SELECT a.columns, b.columns FROM table a JOIN table b ON a.column = b.column;</td>
    </tr>
    <tr>
        <th>Пример</th>
        <td class="code">
            SELECT e1.name as employee, e2.name as manager<br>
            FROM employees e1<br>
            LEFT JOIN employees e2 ON e1.manager_id = e2.id;
        </td>
    </tr>
    <tr>
        <th>Применение</th>
        <td>Организационные иерархии, древовидные структуры</td>
    </tr>
</table>

<h2 id="multiple-joins">Множественные соединения</h2>

<table>
    <tr>
        <th>Описание</th>
        <td>Соединение трех и более таблиц в одном запросе</td>
    </tr>
    <tr>
        <th>Синтаксис</th>
        <td class="code">
            SELECT columns<br>
            FROM table1<br>
            JOIN table2 ON condition1<br>
            JOIN table3 ON condition2<br>
            ...;
        </td>
    </tr>
    <tr>
        <th>Пример</th>
        <td class="code">
            SELECT <br>
                o.order_id, <br>
                c.customer_name, <br>
                p.product_name,<br>
                cat.category_name<br>
            FROM orders o<br>
            JOIN customers c ON o.customer_id = c.customer_id<br>
            JOIN order_items oi ON o.order_id = oi.order_id<br>
            JOIN products p ON oi.product_id = p.product_id<br>
            JOIN categories cat ON p.category_id = cat.category_id;
        </td>
    </tr>
    <tr>
        <th>Рекомендации</th>
        <td>Используйте псевдонимы для улучшения читаемости сложных запросов</td>
    </tr>
</table>

<h2 id="comparison">Сравнение типов JOIN</h2>

<table>
    <tr>
        <th>Тип JOIN</th>
        <th>Результат</th>
        <th>Использование</th>
    </tr>
    <tr>
        <td>INNER JOIN</td>
        <td>Только совпадающие строки из обеих таблиц</td>
        <td>Когда нужны только полные соответствия</td>
    </tr>
    <tr>
        <td>LEFT JOIN</td>
        <td>Все строки из левой таблицы + совпадения из правой</td>
        <td>Когда нужны все записи из основной таблицы, даже без связей</td>
    </tr>
    <tr>
        <td>RIGHT JOIN</td>
        <td>Все строки из правой таблицы + совпадения из левой</td>
        <td>Редко используется, лучше заменить на LEFT JOIN</td>
    </tr>
    <tr>
        <td>FULL JOIN</td>
        <td>Все строки из обеих таблиц</td>
        <td>Когда нужны все данные из обеих таблиц</td>
    </tr>
    <tr>
        <td>CROSS JOIN</td>
        <td>Все возможные комбинации строк</td>
        <td>Для создания матриц или всех возможных комбинаций</td>
    </tr>
</table>

<h2>Практические рекомендации</h2>

<table>
    <tr>
        <th>Рекомендация</th>
        <th>Описание</th>
    </tr>
    <tr>
        <td>Используйте псевдонимы</td>
        <td class="code">FROM employees e JOIN departments d ON e.dept_id = d.id</td>
    </tr>
    <tr>
        <td>Явные JOIN вместо неявных</td>
        <td>Вместо WHERE используйте JOIN ON для лучшей читаемости</td>
    </tr>
    <tr>
        <td>Порядок JOIN имеет значение</td>
        <td>Для LEFT/RIGHT JOIN порядок таблиц влияет на результат</td>
    </tr>
    <tr>
        <td>Индексы для столбцов соединения</td>
        <td>Создавайте индексы для столбцов, используемых в условиях JOIN</td>
    </tr>
</table>

</body>
</html>